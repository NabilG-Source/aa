<script>
  function submitLogin(event) {
    event.preventDefault(); // Mencegah form dikirimkan secara default

    const form = document.querySelector('.loginForm');
    const formData = new FormData(form);

    fetch('/login', {
      method: 'POST',
      body: formData
    })
    .then(response => {
      if (!response.ok) {
        throw new Error('Network response was not ok');
      }
      return response.json();
    })
    .then(data => {
      console.log('Server Response:', data); // Menampilkan data respons di konsol
      
      if (response.status === 200) {
        Swal.fire({
          title: 'Sukses!',
          text: data.message,
          icon: 'success',
          confirmButtonText: 'OK'
        }).then(() => {
          window.location.href = '/success'; // Redirect ke halaman sukses
        });
      } else if (response.status === 401) {
        Swal.fire({
          title: 'Gagal!',
          text: data.message,
          icon: 'error',
          confirmButtonText: 'Coba lagi'
        });
      }
    })
    .catch(error => {
      console.error('Error:', error);
      Swal.fire({
        title: 'Error!',
        text: 'Terjadi kesalahan pada server',
        icon: 'error',
        confirmButtonText: 'OK'
      });
    });
  }
</script>
